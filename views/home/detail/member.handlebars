{{!-- Import custom stylesheet to layout --}}
{{#section 'css'}}
  <link href="/home/assets/vendors/custom/datatables/datatables.bundle.css" rel="stylesheet" type="text/css" />
	<link href="/home/personnel/css/button.css" rel="stylesheet" type="text/css" />
  <style>
    .clubCardPic {
  		width: 40px;
  		height: 40px;
  		border-radius: 50px;
  	}
    .tooltip-inner {
      display : none;
    }
    .m-widget1__info{
      font-size : 18px;
    }
  </style>
{{/section}}
{{!-- Import custom script to layout --}}
{{#section 'js'}}
  <script src="/home/detail/js/member.js" type="text/javascript"></script>
	<script src="/home/assets/vendors/custom/datatables/datatables.bundle.js" type="text/javascript"></script>
  <script>
		var chartData = {
			totalAvail : {{{userInfo.totalAvail}}},
			cash : {{{userInfo.cash}}},
			remainCredit : {{{userInfo.remainCredit}}},
		};
		var nickNameTmp= `{{{userInfo.nickName}}}`;
	</script>
{{/section}}

{{!-- Header goes here --}}
<!-- BEGIN: Subheader -->
<div class="m-subheader ">
	<div class="d-flex align-items-center">
		<div class="mr-auto">
			<h3 class="m-subheader__title "></h3>
		</div>
	</div>
</div>
<!-- END: Subheader -->

{{!-- Content goes here --}}
<div class="m-content">
  <div class="row">
    <div class="col-xl-12">
      <div class="m-portlet m-portlet--mobile">
        <div class="m-portlet__head">
          <div class="m-portlet__head-caption">
            <div class="m-portlet__head-title">
              <h2 class="m-portlet__head-text">會員&nbsp</h2>
              <h2 id="name" class="m-portlet__head-text" style="color:#ffb822">{{{userInfo.name}}}</h2>
              <h2 class="m-portlet__head-text">&nbsp一般資訊</h2>
            </div>
          </div>
          <div class="m-portlet__head-tools">
  					<ul class="m-portlet__nav">
  						<li class="m-portlet__nav-item">
  							<button data-toggle="modal" data-target="#edit-modal" onclick="fillform()" type="button"  class="btn m-btn--square  btn-primary m-btn m-btn--custom m-btn--outline-2x">
                  <i class="la la-edit"></i> <span>編輯</span>
                </button>
  						</li>
  					</ur>
  				</div>
        </div>
        <div class="m-portlet__body">
          <div class="row">
        		<div class="col-xl-7">
        			<!--Begin::Section-->
        			<div class="m-portlet m-portlet--creative m-portlet--bordered-semi m-portlet--rounded m-portlet--bordered">
        				<div class="m-portlet__head" style="height: 0px;">
        					<div class="m-portlet__head-caption">
        						<div class="m-portlet__head-title">
        							<h2 class="m-portlet__head-label m-portlet__head-label--danger" style="width: 7em;" >
        								<span>帳務資訊</span>
        							</h2>
        						</div>
        					</div>
        				</div>
        				<!--Begin::portlet__body-->
        				<div class="m-portlet__body  m-portlet__body--no-padding">
        					<div class="row m-row--no-padding m-row--col-separator-xl">
        						<div class="col-xl-6">

        							<!--begin:: Widgets/Stats2-1 -->
        							<div class="m-widget1">
        								<div class="m-widget1__item">
        									<div class="row m-row--no-padding align-items-center">
        										<div class="col">
        											<h3 class="m-widget1__title">庫存寶石</h3>
        											<span class="m-widget1__desc"></span>
        										</div>
        										<div class="col m--align-right">
        											<span class="colorNum m-widget1__number" data-num="{{{userInfo.cash}}}"> {{{userInfo.cash}}}</span>
        										</div>
        									</div>
        								</div>
        								<div class="m-widget1__item">
        									<div class="row m-row--no-padding align-items-center">
        										<div class="col">
        											<h3 class="m-widget1__title">信用額度</h3>
        											<span class="m-widget1__desc"></span>
        										</div>
        										<div class="col m--align-right">
                              <span id="credit" style="display:none">{{{userInfo.credit}}}</span>
        											<span class="colorNum m-widget1__number" data-num="{{{userInfo.credit}}}"> {{{userInfo.credit}}}</span>
        										</div>
        									</div>
        								</div>
        							</div>

        							<!--end:: Widgets/Stats2-1 -->
        						</div>
        						<div class="col-xl-6">

        							<!--begin:: Widgets/Total Avail-->
        							<div class="m-widget14">
        								<div class="m-widget14__header">
        									<h3 class="m-widget14__title">
        										可用寶石
        									</h3>
        									<span class="m-widget14__desc">
        										目前可用寶石組成
        									</span>
        								</div>
        								<div class="row  align-items-center">
        									<div class="col">
        										<div id="totalAvailChart" class="m-widget14__chart1" style="height: 180px">
        										</div>
        									</div>
        									<div class="col">
        										<div class="m-widget14__legends">
        											<div class="m-widget14__legend">
        												<span class="m-widget14__legend-bullet m--bg-accent"></span>
        												<span class="m-widget14__legend-text">庫存寶石 {{{userInfo.cash}}}</span>
        											</div>
        											<div class="m-widget14__legend">
        												<span class="m-widget14__legend-bullet m--bg-danger"></span>
        												<span class="m-widget14__legend-text">剩餘信用 {{{userInfo.remainCredit}}}</span>
        											</div>
        											<span class="colorNum m-widget1__number" data-num="{{{userInfo.totalAvail}}}" style="font-size: 1.3rem; font-weight: 600;">總和 : {{{userInfo.totalAvail}}}</span>
        										</div>
        									</div>
        								</div>
        							</div>

        							<!--end:: Widgets/Total Avail-->
        						</div>

        					</div>
        				</div>
        				<!--End::portlet__body-->
        			</div>
        			<!--End::Section-->
        		</div>

        		<div class="col-xl-5">
              <div class="m-portlet m-portlet--creative m-portlet--bordered-semi m-portlet--rounded m-portlet--bordered" >
                <div class="m-portlet__head" style="height: 0px;">
                  <div class="m-portlet__head-caption">
                    <div class="m-portlet__head-title">
                      <h2 class="m-portlet__head-label m-portlet__head-label--accent" style="width: 8em;">
                        <span>俱樂部資訊</span>
                      </h2>
                    </div>
                  </div>
                </div>
                <!--Begin::portlet__body-->
                <div class="m-portlet__body  m-portlet__body--no-padding">
                  <div class="row m-row--no-padding m-row--col-separator-xl">
                    <div class="col">

                      <!--begin:: Widgets/Stats2-1 -->
                      <div class="m-widget1">
                        <div class="m-widget1__item">
                          <div class="row m-row--no-padding align-items-center">
                            <div class="col">
                              <h3 class="m-widget1__title">狀態</h3>
                              <span class="m-widget1__desc"></span>
                            </div>
                            <div class="col m--align-right">
                              <span id="status-dot"></span>
                              <span id="status" style="font-size:18px">{{{userInfo.status}}}</span>
                            </div>
                          </div>
                        </div>
												<div class="m-widget1__item">
                          <div class="row m-row--no-padding align-items-center">
                            <div class="col">
                              <h3 class="m-widget1__title">折數</h3>
                              <span class="m-widget1__desc"></span>
                            </div>
                            <div class="col m--align-right">
                              <span id="discountRate" class="m-widget1__info m--font-info" >{{{userInfo.discountRate}}}</span>
                              <span class="m-widget2__number m--font-info">%</span>
                            </div>
                          </div>
                        </div>
                        <div class="m-widget1__item">
                          <div class="row m-row--no-padding align-items-center">
                            <div class="col">
                              <h3 class="m-widget1__title">代理</h3>
                              <span class="m-widget1__desc"></span>
                            </div>
                            <div class="col m--align-right">
                              <span class="m-widget1__info" > {{{userInfo.agentName}}}( </span>
                              <span class="m-widget1__info m--font-primary" >{{{userInfo.agentAccount}}}</span>
                              <span class="m-widget1__info " >)</span><br>
                              {{#if userInfo.showAgCash}}
                                <span class="m-widget1__desc">旗下可用寶石 {{{userInfo.agentTotalAvail}}}</span>
                              {{/if}}
                            </div>
                          </div>
                        </div>
                        <div class="m-widget1__item">
                          <div class="row m-row--no-padding align-items-center">
                            <div class="col">
                              <h3 class="m-widget1__title">店家</h3>
                              <span class="m-widget1__desc"></span>
                            </div>
                            <div class="col m--align-right">
                              <span class="m-widget1__info" > {{{userInfo.storeName}}}( </span>
                              <span class="m-widget1__info m--font-primary" >{{{userInfo.storeAccount}}}</span>
                              <span class="m-widget1__info " > ) </span><br>
                              {{#if userInfo.showHACash}}
                                <span class="m-widget1__desc">旗下可用寶石 {{{userInfo.storeTotalAvail}}}</span>
                              {{/if}}
                            </div>
                          </div>
                        </div>
                      </div>

                      <!--end:: Widgets/Stats2-1 -->
                    </div>
                  </div>
                </div>
                <!--End::portlet__body-->
              </div>
        			</div>
        		</div>
            <div class="row">
              <div class="col-xl-12">
                <div class="m-portlet m-portlet--creative m-portlet--bordered-semi m-portlet--rounded m-portlet--bordered" >
                  <div class="m-portlet__head" style="height: 0px;">
                    <div class="m-portlet__head-caption">
                      <div class="m-portlet__head-title">
                        <h2 class="m-portlet__head-label m-portlet__head-label--metal" style="width: 7em;">
                          <span>一般資訊</span>
                        </h2>
                      </div>
                    </div>
                  </div>
                  <div class="m-portlet__body  m-portlet__body--no-padding">
          					<div class="row m-row--no-padding m-row--col-separator-xl">
                      <div class="col-xl-6">
          							<!--begin:: Widgets/Stats2-1 -->
          							<div class="m-widget1">
          								<div class="m-widget1__item">
          									<div class="row m-row--no-padding align-items-center">
          										<div class="col">
          											<h3 class="m-widget1__title">備註</h3>
          											<span class="m-widget1__desc"></span>
          										</div>
          										<div class="col m--align-right">
          											<span id="comment" class="m-widget1__number m--font-warning"  >{{{userInfo.comment}}}</span>
          										</div>
          									</div>
          								</div>
                          <div class="m-widget1__item">
                            <div class="row m-row--no-padding align-items-center">
                              <div class="col">
                                <h3 class="m-widget1__title">電話</h3>
                                <span class="m-widget1__desc"></span>
                              </div>
                              <div class="col m--align-right">
                                <span id="phone" class="m-widget1__number m--font-accent" >{{{userInfo.phoneNumber}}}</span>
                              </div>
                            </div>
                          </div>
                          <div class="m-widget1__item">
          									<div class="row m-row--no-padding align-items-center">
          										<div class="col">
          											<h3 class="m-widget1__title">銀行代號</h3>
          											<span class="m-widget1__desc"></span>
          										</div>
          										<div class="col m--align-right">
          											<span id="bankSymbol" class="m-widget1__number m--font-metal">{{{userInfo.bankSymbol}}}</span>
          										</div>
          									</div>
          								</div>
                          <div class="m-widget1__item">
          									<div class="row m-row--no-padding align-items-center">
          										<div class="col">
          											<h3 class="m-widget1__title">銀行名稱</h3>
          											<span class="m-widget1__desc"></span>
          										</div>
          										<div class="col m--align-right">
          											<span id="bankName" class="m-widget1__number m--font-metal">{{{userInfo.bankName}}}</span>
          										</div>
          									</div>
          								</div>
                          <div class="m-widget1__item">
          									<div class="row m-row--no-padding align-items-center">
          										<div class="col">
          											<h3 class="m-widget1__title">銀行帳號</h3>
          											<span class="m-widget1__desc"></span>
          										</div>
          										<div class="col m--align-right">
          											<span id="bankAccount" class="m-widget1__number m--font-metal" >{{{userInfo.bankAccount}}}</span>
          										</div>
          									</div>
          								</div>
          							</div>
                      </div>
          							<!--end:: Widgets/Stats2-1 -->
                        <div class="col-xl-6">
                          <div class="m-widget1">
            								<div class="m-widget1__item">
            									<div class="row m-row--no-padding align-items-center">
            										<div class="col">
            											<h3 class="m-widget1__title">Line ID</h3>
            											<span class="m-widget1__desc"></span>
            										</div>
            										<div class="col m--align-right">
            											<span id="line" class="m-widget1__number m--font-accent" >{{{userInfo.lineId}}}</span>
            										</div>
            									</div>
            								</div>
            								<div class="m-widget1__item">
            									<div class="row m-row--no-padding align-items-center">
            										<div class="col">
            											<h3 class="m-widget1__title">Wechat ID</h3>
            											<span class="m-widget1__desc"></span>
            										</div>
            										<div class="col m--align-right">
            											<span id="wechat" class="m-widget1__number m--font-accent">{{{userInfo.wechatId}}}</span>
            										</div>
            									</div>
            								</div>
                            <div class="m-widget1__item">
            									<div class="row m-row--no-padding align-items-center">
            										<div class="col">
            											<h3 class="m-widget1__title">Facebook ID</h3>
            											<span class="m-widget1__desc"></span>
            										</div>
            										<div class="col m--align-right">
            											<span id="facebook" class="m-widget1__number m--font-accent">{{{userInfo.facebookId}}}</span>
            										</div>
            									</div>
            								</div>
                            <div class="m-widget1__item">
            									<div class="row m-row--no-padding align-items-center">
            										<div class="col">
            											<h3 class="m-widget1__title">最後更新時間</h3>
            											<span class="m-widget1__desc"></span>
            										</div>
            										<div class="col m--align-right">
            											<span class="m-widget1__number m--font-brand" > {{{userInfo.updatetime}}}</span>
            										</div>
            									</div>
            								</div>
                            <div class="m-widget1__item">
            									<div class="row m-row--no-padding align-items-center">
            										<div class="col">
            											<h3 class="m-widget1__title">創立時間</h3>
            											<span class="m-widget1__desc"></span>
            										</div>
            										<div class="col m--align-right">
            											<span class="m-widget1__number m--font-brand" > {{{userInfo.createtime}}}</span>
            										</div>
            									</div>
            								</div>
            							</div>
                        </div>
          						</div>
          					</div>
                </div>
              </div>
            </div>
        </div>
      </div>
    </div>
  </div>


    <!--begin::add Modal-->
  	<div class="modal fade" id="edit-modal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  		<div class="modal-dialog modal-lg  modal-dialog-centered" role="document">
  			<div class="modal-content">
  				<!--begin::Form-->
  				<form id="edit-form" class="m-form" autocomplete="off">
  					<div class="modal-header">
  						<h5 class="modal-title" id="exampleModalLabel">修改會員資料</h5>
  						<button type="button" class="close" data-dismiss="modal" aria-label="Close">
  							<span aria-hidden="true">&times;</span>
  						</button>
  					</div>
  					<div class="modal-body">
  						<div class="form-group m-form__group">
  							<label for="example_input_full_name">會員暱稱</label>
  							<div class="m-input-icon m-input-icon--left">
  								<input name="ednickName" id="ednickName" type="text" class="form-control m-input" placeholder="請輸入會員暱稱" value="{{{userInfo.nickName}}}" required>
  								<span class="m-input-icon__icon m-input-icon__icon--left"><span><i class="flaticon-exclamation-2"></i></span></span>
  							</div>
  						</div>
  						<div class="form-group m-form__group">
  							<label for="example_input_full_name">信用額度</label>
									<div class="input-group">
										<input id="edcredit" name="edcredit" type="text" class="form-control m-input" placeholder="請輸入信用額度">
										<div class="input-group-append"><span class="input-group-text">$</span></div>
									</div>
									<span class="m-form__help"> </span>
  						</div>
							<div class="form-group m-form__group">
  							<label for="example_input_full_name">折數</label>
									<div class="input-group">
										{{#if user.isAgent}}
											<input id="eddiscountrate" name="eddiscountrate" type="text" class="form-control m-input" placeholder="请输入折數" readonly="true">
										{{else}}
											<input id="eddiscountrate" name="eddiscountrate" type="text" class="form-control m-input" placeholder="请输入折數">
										{{/if}}
										<div class="input-group-append"><span class="input-group-text">%</span></div>
									</div>
									{{#if user.isAgent}}
										<span class="m-form__help">欲修改會員折數請洽店家</span>
									{{else}}
										<span class="m-form__help"> </span>
									{{/if}}
  						</div>
              <div class="form-group m-form__group">
  							<label for="example_input_full_name">Line ID</label>
  							<div class="m-input-icon m-input-icon--left">
  								<input name="edline" id="edline" type="text" class="form-control m-input" placeholder="請輸入 LineID">
  								<span class="m-input-icon__icon m-input-icon__icon--left"><span><i class="socicon-line"></i></span></span>
  							</div>
  						</div>
              <div class="form-group m-form__group">
  							<label for="example_input_full_name">Wechat ID</label>
  							<div class="m-input-icon m-input-icon--left">
  								<input name="edwechat" id="edwechat" type="text" class="form-control m-input" placeholder="請輸入 Wechat ID">
  								<span class="m-input-icon__icon m-input-icon__icon--left"><span><i class="socicon-wechat"></i></span></span>
  							</div>
  						</div>
              <div class="form-group m-form__group">
  							<label for="example_input_full_name">Facebook ID</label>
  							<div class="m-input-icon m-input-icon--left">
  								<input name="edfacebook" id="edfacebook" type="text" class="form-control m-input" placeholder="請輸入 Facebook ID">
  								<span class="m-input-icon__icon m-input-icon__icon--left"><span><i class="socicon-facebook"></i></span></span>
  							</div>
  						</div>
              <div class="form-group m-form__group">
  							<label for="example_input_full_name">電話</label>
  							<div class="m-input-icon m-input-icon--left">
  								<input name="edphone" id="edphone" type="text" class="form-control m-input" placeholder="請輸入 電話">
  								<span class="m-input-icon__icon m-input-icon__icon--left"><span><i class="fa fa-phone"></i></span></span>
  							</div>
  						</div>
              <div class="form-group m-form__group">
  							<label for="example_input_full_name">銀行代號</label>
  							<div class="m-input-icon m-input-icon--left">
  								<input name="edbankSymbol" id="edbankSymbol" type="text" class="form-control m-input" placeholder="請輸入 銀行代號">
  								<span class="m-input-icon__icon m-input-icon__icon--left"><span><i class="la la-bank"></i></span></span>
  							</div>
  						</div>
              <div class="form-group m-form__group">
  							<label for="example_input_full_name">銀行名稱</label>
  							<div class="m-input-icon m-input-icon--left">
  								<input name="edbankName" id="edbankName" type="text" class="form-control m-input" placeholder="請輸入 銀行名稱">
  								<span class="m-input-icon__icon m-input-icon__icon--left"><span><i class="flaticon-exclamation-2"></i></span></span>
  							</div>
  						</div>
              <div class="form-group m-form__group">
  							<label for="example_input_full_name">銀行帳號</label>
  							<div class="m-input-icon m-input-icon--left">
  								<input name="edbankAccount" id="edbankAccount" type="text" class="form-control m-input" placeholder="請輸入 銀行帳號">
  								<span class="m-input-icon__icon m-input-icon__icon--left"><span><i class="la la-user"></i></span></span>
  							</div>
  						</div>
              <div class="form-group m-form__group">
  							<label for="example_input_full_name">備註</label>
								​<textarea id="edcomment" name="edcomment" class="form-control m-input" rows="3"></textarea>
  						</div>
  						<span class="m-form__help">請填入欲修改之資料</span>
  					</div>
  					<div class="modal-footer">
  						<div class="col m--align-right">
  							<button id="submitButton" type="submit" class="btn m-btn--square  btn-primary m-btn m-btn--custom  ">確定修改</button>
  							<button type="button" class="btn m-btn--square  btn-secondary m-btn m-btn--custom  "  data-dismiss="modal">取消</button>
  						</div>
  					</div>
  				</form>
  				<!--end::Form-->
  			</div>
  		</div>
  	</div>
  	<!--end::add Modal-->

	</div>
